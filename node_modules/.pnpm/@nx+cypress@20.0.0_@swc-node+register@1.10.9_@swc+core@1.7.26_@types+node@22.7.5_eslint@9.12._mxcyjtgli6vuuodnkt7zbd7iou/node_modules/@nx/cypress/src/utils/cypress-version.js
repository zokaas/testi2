"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.installedCypressVersion = installedCypressVersion;
exports.assertMinimumCypressVersion = assertMinimumCypressVersion;
let cypressPackageJson;
let loadedCypress = false;
function installedCypressVersion() {
    if (!loadedCypress) {
        try {
            cypressPackageJson = require('cypress/package.json');
        }
        catch { }
    }
    if (!cypressPackageJson) {
        return null;
    }
    const cypressPackageVersion = cypressPackageJson.version;
    const majorVersion = cypressPackageVersion.split('.')[0];
    if (!majorVersion) {
        return 0;
    }
    return +majorVersion;
}
/**
 * will not throw if cypress is not installed
 */
function assertMinimumCypressVersion(minVersion) {
    const version = installedCypressVersion();
    if (version && version < minVersion) {
        throw new Error(`Cypress version of ${minVersion} or higher is not installed. Expected Cypress v${minVersion}+, found Cypress v${version} instead.`);
    }
}
